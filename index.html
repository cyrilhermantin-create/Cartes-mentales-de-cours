<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 7 - Analyse et synth√®se - Outils d'apprentissage</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 5px;
        }

        .tab-btn {
            padding: 15px 30px;
            margin: 0 5px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #667eea;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Carte Mentale */
        .mindmap {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .central-node {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.3);
            transform: scale(1.1);
        }

        .branch {
            background: white;
            border: 3px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 10px 25px rgba(78, 205, 196, 0.2);
        }

        .branch:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(78, 205, 196, 0.4);
            border-color: #26a69a;
        }

        .branch h3 {
            color: #26a69a;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .branch-details {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: rgba(78, 205, 196, 0.1);
            border-radius: 10px;
            border-left: 4px solid #26a69a;
        }

        /* Quiz Styles */
        .quiz-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .question {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.6;
        }

        .bloom-level {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .bloom-memorisation { background: #ffeb3b; color: #333; }
        .bloom-comprehension { background: #ff9800; color: white; }
        .bloom-application { background: #4caf50; color: white; }
        .bloom-analyse { background: #2196f3; color: white; }
        .bloom-evaluation { background: #9c27b0; color: white; }
        .bloom-creation { background: #f44336; color: white; }

        .options {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .option {
            padding: 15px;
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .quiz-feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4caf50;
            color: #2e7d32;
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #f44336;
            color: #c62828;
        }

        .btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .score {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }

        /* Synth√®se Pareto */
        .pareto-section {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(78, 205, 196, 0.1));
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #ff6b6b;
        }

        .key-concept {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4ecdc4;
        }

        .importance-badge {
            display: inline-block;
            padding: 5px 12px;
            background: #ff6b6b;
            color: white;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Module 7 - Analyse et Synth√®se</h1>
            <p>Documents n√©cessaires avant la r√©daction du DCE</p>
        </div>

        <div class="tab-container">
            <button class="tab-btn active" onclick="showSection('mindmap')">Carte Mentale</button>
            <button class="tab-btn" onclick="showSection('quiz')">Quiz Interactif</button>
            <button class="tab-btn" onclick="showSection('pareto')">Synth√®se Pareto</button>
        </div>

        <!-- Carte Mentale -->
        <div id="mindmap" class="content-section active">
            <div class="central-node">
                Documents pour l'analyse<br>avant r√©daction du DCE
            </div>
            
            <div class="mindmap">
                <div class="branch" onclick="toggleDetails('permis')">
                    <h3>üìã Permis de construire</h3>
                    <p>Documents du ma√Ætre d'≈ìuvre</p>
                    <div id="permis" class="branch-details">
                        <ul>
                            <li>Plans architecturaux</li>
                            <li>Notices d'accessibilit√© handicap√©s</li>
                            <li>Notices d'insertion environnement</li>
                            <li>Compr√©hension compl√®te de l'ouvrage</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('programme')">
                    <h3>üìù Programme</h3>
                    <p>Document du ma√Ætre d'ouvrage</p>
                    <div id="programme" class="branch-details">
                        <ul>
                            <li>Besoins du ma√Ætre d'ouvrage</li>
                            <li>Nature et sp√©cifications de l'ouvrage</li>
                            <li>R√©glementations applicables</li>
                            <li>Contraintes (environnementales, urbanisme)</li>
                            <li>Exigences sp√©cifiques</li>
                            <li>Financement valid√©</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('geotechnique')">
                    <h3>üèóÔ∏è Rapport g√©otechnique</h3>
                    <p>Bureau d'√©tudes de sol</p>
                    <div id="geotechnique" class="branch-details">
                        <ul>
                            <li>Nature du sol</li>
                            <li>Contraintes g√©otechniques</li>
                            <li>Impact sur la construction</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('techniques')">
                    <h3>üî¨ Documents techniques</h3>
                    <p>Sp√©cialistes</p>
                    <div id="techniques" class="branch-details">
                        <ul>
                            <li>Rapport acoustique (acousticien)</li>
                            <li>Rapport thermique (thermicien)</li>
                            <li>Directives sp√©cialis√©es</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('securite')">
                    <h3>üõ°Ô∏è PGC-SPS</h3>
                    <p>Coordonnateur de s√©curit√©</p>
                    <div id="securite" class="branch-details">
                        <ul>
                            <li>Risques li√©s au site</li>
                            <li>Contraintes de s√©curit√©</li>
                            <li>R√©percussion vers les entreprises</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('qualite')">
                    <h3>‚úÖ SDQ</h3>
                    <p>Bureau d'√©tudes qualit√©</p>
                    <div id="qualite" class="branch-details">
                        <ul>
                            <li>Sch√©ma directeur de la qualit√©</li>
                            <li>Exigences qualit√©</li>
                            <li>Pi√®ces √† produire pour les offres</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('environnement')">
                    <h3>üå± Notice environnement</h3>
                    <p>Bureau d'√©tudes environnement</p>
                    <div id="environnement" class="branch-details">
                        <ul>
                            <li>Exigences environnementales</li>
                            <li>Respect de l'environnement</li>
                            <li>Documentation requise</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('reseaux')">
                    <h3>üîå Demande de renseignements</h3>
                    <p>Mairie</p>
                    <div id="reseaux" class="branch-details">
                        <ul>
                            <li>Concessionnaires des r√©seaux</li>
                            <li>Contraintes de site</li>
                            <li>R√©seaux existants</li>
                        </ul>
                    </div>
                </div>

                <div class="branch" onclick="toggleDetails('existant')">
                    <h3>üèòÔ∏è Documents existant</h3>
                    <p>Interventions sur b√¢ti existant</p>
                    <div id="existant" class="branch-details">
                        <ul>
                            <li>Relev√© g√©om√®tre (topographie)</li>
                            <li>Diagnostics techniques (amiante, plomb, termite, radon)</li>
                            <li>Plan du cadastre</li>
                            <li>Permis de d√©molir si n√©cessaire</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Interactif -->
        <div id="quiz" class="content-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="score" id="scoreDisplay">Score: 0/0</div>
            
            <div id="quizContainer">
                <!-- Les questions seront g√©n√©r√©es par JavaScript -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="startQuiz" onclick="startQuiz()">Commencer le Quiz</button>
                <button class="btn" id="nextQuestion" onclick="nextQuestion()" style="display: none;">Question Suivante</button>
                <button class="btn" id="restartQuiz" onclick="restartQuiz()" style="display: none;">Recommencer</button>
            </div>
        </div>

        <!-- Synth√®se Pareto -->
        <div id="pareto" class="content-section">
            <div class="pareto-section">
                <h2 style="color: #ff6b6b; margin-bottom: 20px;">üéØ Principe de Pareto - 20% Essentiel = 80% des Connaissances</h2>
                
                <div class="key-concept">
                    <div class="importance-badge">CRITIQUE - 25%</div>
                    <h3>1. Documents du Ma√Ætre d'≈íuvre</h3>
                    <p><strong>Permis de construire :</strong> Base fondamentale pour comprendre l'ouvrage et ses contraintes r√©glementaires. Sans ces documents, impossible de r√©diger un DCE coh√©rent.</p>
                </div>

                <div class="key-concept">
                    <div class="importance-badge">CRITIQUE - 25%</div>
                    <h3>2. Programme du Ma√Ætre d'Ouvrage</h3>
                    <p><strong>Obligatoire en march√© public :</strong> D√©finit les besoins, sp√©cifications, contraintes et financement. Document strat√©gique pour orienter toute l'analyse.</p>
                </div>

                <div class="key-concept">
                    <div class="importance-badge">ESSENTIEL - 20%</div>
                    <h3>3. Rapport G√©otechnique</h3>
                    <p><strong>Impact direct sur les fondations :</strong> D√©termine les contraintes techniques majeures et influence significativement les co√ªts de construction.</p>
                </div>

                <div class="key-concept">
                    <div class="importance-badge">ESSENTIEL - 15%</div>
                    <h3>4. Documents S√©curit√© & Qualit√©</h3>
                    <p><strong>PGC-SPS et SDQ :</strong> Obligatoires pour d√©finir les exigences de s√©curit√© et qualit√© qui impactent directement les entreprises.</p>
                </div>

                <div class="key-concept">
                    <div class="importance-badge">IMPORTANT - 15%</div>
                    <h3>5. Documents Sp√©cialis√©s</h3>
                    <p><strong>Rapports techniques :</strong> Acoustique, thermique, environnement - d√©finissent les contraintes techniques sp√©cifiques selon le projet.</p>
                </div>

                <h3 style="color: #4ecdc4; margin-top: 30px;">üí° M√©morisation efficace :</h3>
                <p style="background: rgba(78, 205, 196, 0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <strong>My√©monique PPGSTS :</strong><br>
                    <strong>P</strong>ermis + <strong>P</strong>rogramme + <strong>G</strong>√©otechnique + <strong>S</strong>√©curit√© + <strong>T</strong>echnique + <strong>S</strong>p√©cifique<br>
                    Ces 6 cat√©gories repr√©sentent 80% des connaissances essentielles du module !
                </p>
            </div>
        </div>
    </div>

    <script>
        // Questions du quiz bas√©es sur la taxonomie de Bloom
        const questions = [
            {
                level: "memorisation",
                question: "Qui √©tablit le rapport g√©otechnique ?",
                options: [
                    "Le ma√Ætre d'≈ìuvre",
                    "Le bureau d'√©tudes de sol (g√©otechnicien)",
                    "Le ma√Ætre d'ouvrage",
                    "Le coordonnateur de s√©curit√©"
                ],
                correct: 1,
                feedback: "Le rapport g√©otechnique est √©tabli par un bureau d'√©tudes de sol ou un g√©otechnicien pour d√©terminer la nature du sol."
            },
            {
                level: "comprehension",
                question: "Pourquoi le programme du ma√Ætre d'ouvrage est-il obligatoire dans un march√© public ?",
                options: [
                    "Pour respecter la r√©glementation des march√©s publics",
                    "Pour d√©finir les besoins, sp√©cifications et contraintes du projet",
                    "Pour assurer un financement ad√©quat",
                    "Toutes les r√©ponses ci-dessus"
                ],
                correct: 3,
                feedback: "Le programme est obligatoire car il centralise tous les √©l√©ments essentiels : besoins, sp√©cifications, contraintes, r√©glementations et financement."
            },
            {
                level: "application",
                question: "Dans quel cas l'√©conomiste doit-il consulter les diagnostics techniques d'amiante et de plomb ?",
                options: [
                    "Pour tout nouveau b√¢timent",
                    "Uniquement pour les b√¢timents de plus de 50 ans",
                    "Lors d'interventions sur des b√¢timents existants",
                    "Seulement si le ma√Ætre d'ouvrage le demande"
                ],
                correct: 2,
                feedback: "Les diagnostics techniques (amiante, plomb, termite, radon) sont n√©cessaires lors d'interventions sur des b√¢timents existants pour conna√Ætre leur √©tat."
            },
            {
                level: "analyse",
                question: "Analysez l'impact d'un sol argileux instable sur la r√©daction du DCE :",
                options: [
                    "Aucun impact, c'est du ressort de l'entreprise",
                    "N√©cessit√© de pr√©voir des fondations sp√©ciales et d'informer les entreprises",
                    "Simple mention dans les documents techniques",
                    "Report de la consultation"
                ],
                correct: 1,
                feedback: "Un sol instable impose des contraintes techniques importantes qui doivent √™tre anticip√©es dans le DCE pour que les entreprises puissent chiffrer correctement."
            },
            {
                level: "evaluation",
                question: "√âvaluez l'ordre de priorit√© pour l'√©conomiste : quel document consulter EN PREMIER ?",
                options: [
                    "Le rapport g√©otechnique pour conna√Ætre les contraintes",
                    "Le programme du ma√Ætre d'ouvrage pour comprendre les objectifs",
                    "Le permis de construire pour avoir la vision globale",
                    "Le PGC-SPS pour la s√©curit√©"
                ],
                correct: 1,
                feedback: "Le programme d√©finit les objectifs et le cadre g√©n√©ral du projet. Il oriente toute l'analyse et doit √™tre consult√© en premier."
            },
            {
                level: "creation",
                question: "Vous devez cr√©er une checklist pour un projet de r√©novation d'√©cole. Quels documents sont INDISPENSABLES ?",
                options: [
                    "Permis + Programme + G√©otechnique uniquement",
                    "Tous les documents mentionn√©s dans le cours",
                    "Permis + Programme + Diagnostics existant + S√©curit√© + Accessibilit√©",
                    "Programme + G√©otechnique + Environnement"
                ],
                correct: 2,
                feedback: "Pour une √©cole (ERP), tous ces documents sont critiques : r√©glementation stricte, s√©curit√© renforc√©e, accessibilit√© obligatoire, √©tat de l'existant crucial."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let quizStarted = false;

        function showSection(section) {
            // Masquer toutes les sections
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            // Afficher la section s√©lectionn√©e
            document.getElementById(section).classList.add('active');
            event.target.classList.add('active');
        }

        function toggleDetails(id) {
            const details = document.getElementById(id);
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
            } else {
                details.style.display = 'none';
            }
        }

        function startQuiz() {
            quizStarted = true;
            currentQuestion = 0;
            score = 0;
            document.getElementById('startQuiz').style.display = 'none';
            document.getElementById('restartQuiz').style.display = 'none';
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestion];
            const container = document.getElementById('quizContainer');
            
            const bloomLabels = {
                'memorisation': 'M√©morisation',
                'comprehension': 'Compr√©hension', 
                'application': 'Application',
                'analyse': 'Analyse',
                'evaluation': '√âvaluation',
                'creation': 'Cr√©ation'
            };

            container.innerHTML = `
                <div class="quiz-container">
                    <div class="bloom-level bloom-${question.level}">
                        Niveau Bloom: ${bloomLabels[question.level]}
                    </div>
                    <div class="question">${question.question}</div>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})">${option}</div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="feedback"></div>
                </div>
            `;

            updateProgress();
            updateScore();
        }

        function selectOption(selectedIndex) {
            const question = questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            
            // D√©sactiver tous les clics
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                }
            });

            // Afficher le feedback
            if (selectedIndex === question.correct) {
                score++;
                feedback.className = 'quiz-feedback correct';
                feedback.innerHTML = '‚úÖ ' + question.feedback;
            } else {
                feedback.className = 'quiz-feedback incorrect';
                feedback.innerHTML = '‚ùå ' + question.feedback;
            }
            feedback.style.display = 'block';

            // Afficher le bouton suivant
            document.getElementById('nextQuestion').style.display = 'inline-block';
            updateScore();
        }

        function nextQuestion() {
            currentQuestion++;
            document.getElementById('nextQuestion').style.display = 'none';
            showQuestion();
        }

        function showResults() {
            const container = document.getElementById('quizContainer');
            const percentage = Math.round((score / questions.length) * 100);
            
            let resultMessage = '';
            let resultClass = '';
            
            if (percentage >= 80) {
                resultMessage = 'Excellent ! Vous ma√Ætrisez parfaitement le module.';
                resultClass = 'correct';
            } else if (percentage >= 60) {
                resultMessage = 'Bon travail ! Quelques r√©visions sur les points faibles.';
                resultClass = 'correct';
            } else {
                resultMessage = 'Il faut revoir le cours. Utilisez la carte mentale !';
                resultClass = 'incorrect';
            }

            container.innerHTML = `
                <div class="quiz-container">
                    <h2 style="text-align: center; color: #667eea;">üéØ R√©sultats du Quiz</h2>
                    <div class="score" style="font-size: 2em;">${score}/${questions.length} (${percentage}%)</div>
                    <div class="quiz-feedback ${resultClass}" style="display: block; text-align: center;">
                        ${resultMessage}
                    </div>
                </div>
            `;

            document.getElementById('restartQuiz').style.display = 'inline-block';
        }

        function restartQuiz() {
            document.getElementById('restartQuiz').style.display = 'none';
            document.getElementById('startQuiz').style.display = 'inline-block';
            document.getElementById('quizContainer').innerHTML = '';
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('scoreDisplay').textContent = 'Score: 0/0';
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function updateScore() {
            document.getElementById('scoreDisplay').textContent = `Score: ${score}/${currentQuestion + (quizStarted ? 1 : 0)}`;
        }
    </script>
</body>
</html>
